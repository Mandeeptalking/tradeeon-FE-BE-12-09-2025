# Fix URI_NOVOWEL Spam Warning

## Problem
Supabase is warning about "URI_NOVOWEL" because the hardcoded Supabase URL (`mgjlnmlhwuqspctanaik.supabase.co`) has a long sequence of consonants without vowels, which spam filters flag as suspicious.

## Solution: Use Supabase's Built-in Variables

Instead of hardcoding the Supabase URL, use Supabase's built-in `{{ .ConfirmationURL }}` variable, which Supabase generates in a spam-safe way.

### Updated Template

```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
</head>
<body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; padding: 20px;">
  <div style="max-width: 600px; margin: 0 auto;">
    <h2 style="color: #2563eb;">Confirm your signup</h2>
    
    <p>Thank you for signing up for Tradeeon! Please confirm your email address by clicking the link below:</p>
    
    <p style="margin: 30px 0;">
      <a href="{{ .ConfirmationURL }}&redirect_to=https://www.tradeeon.com/auth/callback" 
         style="color: #2563eb; text-decoration: underline;">
        Confirm your email address
      </a>
    </p>
    
    <p style="color: #666; font-size: 14px;">
      If you didn't sign up for Tradeeon, you can safely ignore this email.
    </p>
  </div>
</body>
</html>
```

**Key Change:** Use `{{ .ConfirmationURL }}` instead of hardcoding the Supabase URL.

### How It Works

1. `{{ .ConfirmationURL }}` is generated by Supabase and includes:
   - The Supabase verify endpoint
   - The token_hash
   - The type parameter
   - The redirect_to parameter (if `emailRedirectTo` is set in signup)

2. We append `&redirect_to=https://www.tradeeon.com/auth/callback` to ensure the final redirect goes to our callback page.

3. Supabase's generated URL is spam-filter friendly.

### Important: Verify Redirect URL is Set

Make sure your signup code includes `emailRedirectTo` (which it already does):

```typescript
emailRedirectTo: redirectUrl  // Already set in Signup.tsx
```

And ensure `https://www.tradeeon.com/auth/callback` is in your Supabase **Redirect URLs** list (which it already is).

### Alternative: If Appending Doesn't Work

If appending `&redirect_to` doesn't work, Supabase should automatically use the `emailRedirectTo` from the signup call. In that case, use:

```html
<a href="{{ .ConfirmationURL }}">Confirm your email address</a>
```

The `{{ .ConfirmationURL }}` should already include the redirect_to parameter if `emailRedirectTo` is set in the signup.

## Steps

1. Go to Supabase Dashboard → Authentication → Email Templates
2. Select "Confirm signup" template
3. Replace with the template above (using `{{ .ConfirmationURL }}`)
4. Save
5. The spam warning should disappear

## Why This Works

- `{{ .ConfirmationURL }}` is generated by Supabase using their spam-safe URL generation
- No hardcoded URLs with long consonant sequences
- Supabase handles the URL formatting to avoid spam filters
- The redirect_to parameter is included automatically if set in signup

